<mat-sidenav-container class="sidenav-container">
  <!-- Side Navigation -->
  <mat-sidenav #sidenav mode="side" [opened]="(isHandset$ | async) === false" [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [fixedInViewport]="true" class="sidenav">
    <mat-toolbar>Task Management</mat-toolbar>
    <mat-nav-list>
      <a mat-list-item routerLink="/tasks" routerLinkActive="active-link">
        <mat-icon aria-hidden="false" aria-label="Tasks">task</mat-icon>
        <span class="full-text">Tasks</span>
      </a>
      <a mat-list-item routerLink="/dashboard" routerLinkActive="active-link">
        <mat-icon aria-hidden="false" aria-label="Dashboard">dashboard</mat-icon>
        <span class="full-text">Dashboard</span>
      </a>
      <a mat-list-item routerLink="/profile" routerLinkActive="active-link">
        <mat-icon aria-hidden="false" aria-label="Profile">person</mat-icon>
        <span class="full-text">Profile</span>
      </a>
      <a mat-list-item (click)="logout()" *ngIf="isAuthenticated">
        <mat-icon aria-hidden="false" aria-label="Logout">exit_to_app</mat-icon>
        <span class="full-text">Logout</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>
  
  <!-- Main Content -->
  <mat-sidenav-content>
    <mat-toolbar color="primary">
      <button
        type="button"
        aria-label="Toggle sidenav"
        mat-icon-button
        (click)="sidenav.toggle()"
        *ngIf="isHandset$ | async">
        <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
      </button>
      <span>Task Management System</span>
      <span class="toolbar-spacer"></span>
      
      <!-- Theme Toggle -->
      <button mat-icon-button 
        (click)="themeService.toggleTheme()" 
        [matTooltip]="(themeService.theme$ | async) === 'light-theme' ? 'Switch to dark mode' : 'Switch to light mode'"
        aria-label="Toggle dark mode">
        <mat-icon>{{ (themeService.theme$ | async) === 'light-theme' ? 'dark_mode' : 'light_mode' }}</mat-icon>
      </button>
    </mat-toolbar>
    
    <!-- Page Content -->
    <div class="content-container">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>